services:
  client:
    build:
      # Поскольку docker-compose не в корне client,
      # нужно указать context с путём до client относительно docker-compose
      context: ../client
      # Путь до Dockerfile здесь указывается относительно context
      dockerfile: ../dev-config/Dockerfile.client
    ports:
      - "5173:5173"

    volumes:
      # Связываем локальную директорию с директорией в контейнере для hot reload'а
      - ../client:/usr/app
      - /usr/app/node_modules

    environment:
      - MODE=develop

    command: bash -c "npm install && npm run dev"
